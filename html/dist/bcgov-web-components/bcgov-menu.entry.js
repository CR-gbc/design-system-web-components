import{r as e,h as s,H as i,g as t}from"./p-100c0da1.js";import{m as n,a,k as o}from"./p-129bfbdc.js";const l=class{constructor(s){e(this,s),this.alignment="left",this.menuId="menu",this.instructions="Use arrow keys to navigate between menuitems,\n  spacebar to expand submenus, escape key to close submenus, enter to activate menuitems.",this.breakpoint=0,this.hamburger=!0,this.active=!1,this.isSubmenu=!1,this.showSubmenu=(e,s)=>{if(!this.isSubmenu)return;s?e.classList.add("expanded"):e.classList.remove("expanded"),e.setAttribute("aria-expanded",s?"true":"false"),e.setAttribute("tabindex",s?"-1":"0"),e.setAttribute("aria-selected",s?"true":"false");const i=e.querySelector("ul");if(null!==i)if(i.setAttribute("aria-hidden",s?"false":"true"),s){const s=e.querySelector("ul > li:first-child");s.setAttribute("tabindex","-1"),s.focus()}else this.el.focus()}}componentWillLoad(){this.isSubmenu="UL"===this.el.parentElement.nodeName,[].forEach.call(this.el.querySelectorAll("a"),function(e){n(e)});const e=this;this.bodyTag=document.getElementsByTagName("BODY")[0],this.isSubmenu||(this.isDesktop(),window.addEventListener("resize",function(){e.isDesktop()}))}componentDidRender(){if(this.isSubmenu)this.el.setAttribute("aria-haspopup",!0),this.el.setAttribute("aria-expanded",!1),this.el.setAttribute("aria-selected",!1),this.el.setAttribute("tabindex",-1);else{const e=this.el.querySelector("ul > *:first-child");null!==e&&e.setAttribute("tabindex",0)}}isDesktop(){let e=!1;if(this.isSubmenu){let s=a(this.el,"bcgov-menu");if(null!==s&&s.getAttribute("breakpoint")){const i=parseInt(s.getAttribute("breakpoint"));e=window.innerWidth>=i}}else window.innerWidth>=this.breakpoint?(this.el.classList.contains("is-desktop")||this.el.classList.add("is-desktop"),void 0!==this.primary&&(this.bodyTag.classList.contains("bcgov-menu-primary-is-desktop")||this.bodyTag.classList.add("bcgov-menu-primary-is-desktop")),e=!0):(this.el.classList.remove("is-desktop"),void 0!==this.primary&&this.bodyTag.classList.remove("bcgov-menu-primary-is-desktop"));return e}onMouseEnter(e){if(this.isDesktop()){const s=e.target;s.focus(),this.showSubmenu(s,!0)}}onMouseLeave(e){this.isDesktop()&&(this.showSubmenu(e.target,!1),this.isSubmenu||[].forEach.call(this.el.querySelectorAll("ul > *"),function(e){e.setAttribute("tabindex",-1),e.blur()}))}onClick(e){if(!this.isDesktop()){const s=e.target,i=a(s,"bcgov-menu");null===s.closest(".bcgov-primary-menu-close")?this.showSubmenu(i,!i.classList.contains("expanded")):(i.classList.add("target-hidden"),console.log("close menu"))}}onKeyDown(e){const s=e.srcElement;switch(e.keyCode){case o.enter:s.querySelector("a").click();case o.space:e.preventDefault(),e.stopPropagation(),this.showSubmenu(this.el,!0);break;case o.esc:e.preventDefault(),e.stopPropagation(),this.showSubmenu(this.el,!1);break;case o.right:e.preventDefault(),this.focusChange(s,"next");break;case o.left:e.preventDefault(),this.focusChange(s,"prev");break;case o.up:e.preventDefault(),this.focusChange(s,"up");break;case o.down:e.preventDefault(),this.focusChange(s,"down")}}focusChange(e,s="next"){let i;e===this.el.querySelector("ul")?(i=e.querySelector("li:first-child"),e=i=this.isDesktop()?i.nextElementSibling:i):"next"===s||"down"===s?i=e.nextElementSibling:"prev"!=s&&"up"!==s||(i=e.previousElementSibling);const t=null!==a(e,'ul[role="menu"]');(t&&("up"===s||"down"===s)||!t&&("prev"===s||"next"===s))&&(null==i||"LI"!==e.nodeName&&"BCGOV-MENU"!==e.nodeName||(e.setAttribute("tabindex","-1"),i.setAttribute("tabindex","0"),i.focus()))}render(){const e="align-"+this.alignment,t="bcgov-instructions-"+this.menuId;let n="expandable";if(this.isSubmenu)return void 0!==this.active&&this.active&&(n+=" active"),s(i,{role:"menuitem",class:n,"aria-label":this.name},s("div",null,s("a",{href:this.href,tabindex:"-1"},this.name),s("span",null),s("slot",{name:"submenu-link"})),s("ul",{role:"menu","aria-hidden":"true"},s("slot",null)));{const n={role:"menubar",tabindex:"0",class:e};return void 0!==this.primary&&(n["aria-labelledby"]=t),void 0!==this.sidebar&&(n.class+=" sidebar-menu"),s(i,null,s("ul",Object.assign({},n),void 0!==this.primary&&s("li",{role:"menuitem",class:"bcgov-primary-menu-close",tabindex:"-1","aria-hidden":"true","aria-labelId":"close-menu-mobile"},s("a",{href:"#","aria-label":"Close Mobile Menu",id:"close-menu-mobile"},s("span",null,"x"))),s("slot",null)),void 0!==this.primary&&s("div",{class:"sr-only","aria-hidden":"true",id:t},this.instructions))}}get el(){return t(this)}};export{l as bcgov_menu};