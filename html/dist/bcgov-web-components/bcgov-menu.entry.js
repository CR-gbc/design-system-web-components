import{r as e,h as i,H as s,g as t}from"./p-100c0da1.js";import{m as n,a,k as o}from"./p-129bfbdc.js";const l=class{constructor(i){e(this,i),this.alignment="left",this.menuId="menu",this.instructions="Use arrow keys to navigate between menuitems,\n  spacebar to expand submenus, escape key to close submenus, enter to activate menuitems.",this.breakpoint=0,this.hamburger=!0,this.active=!1,this.isSubmenu=!1,this.showSubmenu=(e,i)=>{if(!this.isSubmenu)return;i?e.classList.add("expanded"):e.classList.remove("expanded"),e.setAttribute("aria-expanded",i?"true":"false"),e.setAttribute("tabindex",i?"-1":"0"),e.setAttribute("aria-selected",i?"true":"false");const s=e.querySelector("ul");if(null!==s)if(s.setAttribute("aria-hidden",i?"false":"true"),i){const i=e.querySelector("ul > li:first-child");i.setAttribute("tabindex","-1"),i.focus()}else this.el.focus()}}componentWillLoad(){this.isSubmenu="UL"===this.el.parentElement.nodeName,[].forEach.call(this.el.querySelectorAll("a"),function(e){n(e)});const e=this;this.bodyTag=document.getElementsByTagName("BODY")[0],this.isSubmenu||(this.isDesktop(),window.addEventListener("resize",function(){e.isDesktop()}),void 0!==this.primary&&window.addEventListener("click",function(i){null!==i.srcElement.closest("bcgov-menu")||e.isDesktop()||console.log("close menu")}))}componentDidRender(){if(this.isSubmenu)this.el.setAttribute("aria-haspopup",!0),this.el.setAttribute("aria-expanded",!1),this.el.setAttribute("aria-selected",!1),this.el.setAttribute("tabindex",-1);else{const e=this.el.querySelector("ul > *:first-child");null!==e&&e.setAttribute("tabindex",0)}}isDesktop(){let e=!1;if(this.isSubmenu){let i=a(this.el,"bcgov-menu");if(null!==i&&i.getAttribute("breakpoint")){const s=parseInt(i.getAttribute("breakpoint"));e=window.innerWidth>=s}}else window.innerWidth>=this.breakpoint?(this.el.classList.contains("is-desktop")||this.el.classList.add("is-desktop"),void 0!==this.primary&&(this.bodyTag.classList.contains("bcgov-menu-primary-is-desktop")||this.bodyTag.classList.add("bcgov-menu-primary-is-desktop")),e=!0):(this.el.classList.remove("is-desktop"),void 0!==this.primary&&this.bodyTag.classList.remove("bcgov-menu-primary-is-desktop"));return e}onMouseEnter(e){if(this.isDesktop()){const i=e.target;i.focus(),this.showSubmenu(i,!0)}}onMouseLeave(e){this.isDesktop()&&(this.showSubmenu(e.target,!1),this.isSubmenu||[].forEach.call(this.el.querySelectorAll("ul > *"),function(e){e.setAttribute("tabindex",-1),e.blur()}))}onClick(e){if(console.log("click event"),!this.isDesktop()){const i=a(e.target,"bcgov-menu");this.showSubmenu(i,!i.classList.contains("expanded"))}}onKeyDown(e){const i=e.srcElement;switch(e.keyCode){case o.enter:i.querySelector("a").click();case o.space:e.preventDefault(),e.stopPropagation(),this.showSubmenu(this.el,!0);break;case o.esc:e.preventDefault(),e.stopPropagation(),this.showSubmenu(this.el,!1);break;case o.right:e.preventDefault(),this.focusChange(i,"next");break;case o.left:e.preventDefault(),this.focusChange(i,"prev");break;case o.up:e.preventDefault(),this.focusChange(i,"up");break;case o.down:e.preventDefault(),this.focusChange(i,"down")}}focusChange(e,i="next"){let s;e===this.el.querySelector("ul")?(s=e.querySelector("li:first-child"),e=s=this.isDesktop()?s.nextElementSibling:s):"next"===i||"down"===i?s=e.nextElementSibling:"prev"!=i&&"up"!==i||(s=e.previousElementSibling);const t=null!==a(e,'ul[role="menu"]');(t&&("up"===i||"down"===i)||!t&&("prev"===i||"next"===i))&&(null==s||"LI"!==e.nodeName&&"BCGOV-MENU"!==e.nodeName||(e.setAttribute("tabindex","-1"),s.setAttribute("tabindex","0"),s.focus()))}render(){const e="align-"+this.alignment,t="bcgov-instructions-"+this.menuId;let n="expandable";if(this.isSubmenu)return void 0!==this.active&&this.active&&(n+=" active"),i(s,{role:"menuitem",class:n,"aria-label":this.name},i("div",null,i("a",{href:this.href,tabindex:"-1"},this.name),i("span",null),i("slot",{name:"submenu-link"})),i("ul",{role:"menu","aria-hidden":"true"},i("slot",null)));{const n={role:"menubar",tabindex:"0",class:e};return void 0!==this.primary&&(n["aria-labelledby"]=t),void 0!==this.sidebar&&(n.class+=" sidebar-menu"),i(s,null,i("ul",Object.assign({},n),void 0!==this.primary&&i("li",{role:"menuitem",class:"bcgov-primary-menu-close2",tabindex:"-1","aria-hidden":"true","aria-labelId":"close-menu-mobile"},i("a",{href:"#","aria-label":"Close Mobile Menu",id:"close-menu-mobile"},"x")),i("slot",null)),void 0!==this.primary&&i("div",{class:"sr-only","aria-hidden":"true",id:t},this.instructions))}}get el(){return t(this)}};export{l as bcgov_menu};